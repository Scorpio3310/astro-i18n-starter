---
# SEO metadata
title: "About Project - Multilingual Astro Starter"
description: "Explore this multilingual Astro starter project with dynamic routing, i18n localization, Slovenian and English support. Perfect for modern web applications."
keywords: "Astro project, multilingual website, i18n, starter template, dynamic routing, Slovenian, English, localization, MDX"
---

# Dynamic Routing Documentation with i18n

Since Astro doesn't natively support URL localization out of the box, a different approach was needed to enable multilingual pages. This project uses dynamic parameters (`[...pages]`) to implement localized paths.

## üèóÔ∏è Project Architecture Overview

The project implements an internationalization (i18n) system that enables:

-   ‚úÖ SEO-friendly URLs in multiple languages
-   ‚úÖ Automatic static generation at build time
-   ‚úÖ Language-specific content loading
-   ‚úÖ Seamless integration with translation system
-   ‚úÖ Smart language switching with context preservation

## üìÅ File Structure

```
src/
‚îú‚îÄ‚îÄ components/           # Components (Header, Footer, LanguagePicker)
‚îú‚îÄ‚îÄ content/              # Content (blogs, authors)
‚îÇ   ‚îú‚îÄ‚îÄ blog/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ en/           # English posts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sl/           # Slovenian posts
‚îÇ   ‚îî‚îÄ‚îÄ authors/          # Author data
‚îú‚îÄ‚îÄ data/                 # Navigation data
‚îÇ   ‚îî‚îÄ‚îÄ navigationData.ts
‚îú‚îÄ‚îÄ i18n/                 # Internationalization system
‚îÇ   ‚îú‚îÄ‚îÄ routes.ts         # Path translations
‚îÇ   ‚îú‚îÄ‚îÄ ui.ts             # Language configuration
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts          # Utility functions
‚îú‚îÄ‚îÄ layouts/              # Base layouts
‚îú‚îÄ‚îÄ locales/              # Translation files
‚îÇ   ‚îú‚îÄ‚îÄ en/               # English translations
‚îÇ   ‚îî‚îÄ‚îÄ sl/               # Slovenian translations
‚îú‚îÄ‚îÄ pages/                # Pages with dynamic routing
‚îÇ   ‚îú‚îÄ‚îÄ [about]/          # About pages
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ [...index].astro
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _about-en.mdx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ _about-sl.mdx
‚îÇ   ‚îú‚îÄ‚îÄ [blog]/           # Blog detail pages
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [...slug].astro
‚îÇ   ‚îú‚îÄ‚îÄ [dyn_routing]/    # Dynamic routing examples
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ [subpage2]/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [...index].astro
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [...subpage1].astro
‚îÇ   ‚îú‚îÄ‚îÄ [pages]/          # General pages
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ [...index].astro
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _pages-en.mdx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ _pages-sl.mdx
‚îÇ   ‚îú‚îÄ‚îÄ [pagination]/     # Pagination examples
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [...page].astro
‚îÇ   ‚îú‚îÄ‚îÄ [...blog].astro   # Blog listing page
‚îÇ   ‚îú‚îÄ‚îÄ [...contact].astro # Contact page
‚îÇ   ‚îú‚îÄ‚îÄ [...index].astro  # Home page
‚îÇ   ‚îî‚îÄ‚îÄ 404.astro         # Error page
‚îî‚îÄ‚îÄ styles/              # Style files
```

## üîÄ How Dynamic Routing Works

### 1. URL Structure

> Examples assume `defaultLang = "en"` and `showDefaultLang = false`. These URLs adapt automatically when you change these settings.

| Page Pattern               | English URL  | Slovenian URL                | Description |
| -------------------------- | ------------ | ---------------------------- | ----------- |
| `[...index].astro`         | `/`          | `/sl/`                       | Home page   |
| `[about]/[...index].astro` | `/about`     | `/sl/o-projektu`             | About       |
| `[...contact].astro`       | `/contact`   | `/sl/kontakt`                | Contact     |
| `[blog]/[...slug].astro`   | `/blog/post` | `/sl/spletni-dnevnik/objava` | Blog posts  |

### 2. Visual Routing Flow

```
File: [about]/[...index].astro
‚îÇ
‚îú‚îÄ‚îÄ English path
‚îÇ   ‚îú‚îÄ‚îÄ URL: /about
‚îÇ   ‚îú‚îÄ‚îÄ Parameters: { about: "about", index: undefined }
‚îÇ   ‚îú‚îÄ‚îÄ Props: { lang: "en" }
‚îÇ   ‚îî‚îÄ‚îÄ Content: _about-en.md
‚îÇ
‚îî‚îÄ‚îÄ Slovenian path
    ‚îú‚îÄ‚îÄ URL: /sl/o-projektu
    ‚îú‚îÄ‚îÄ Parameters: { about: "sl", index: "o-projektu" }
    ‚îú‚îÄ‚îÄ Props: { lang: "sl" }
    ‚îî‚îÄ‚îÄ Content: _about-sl.md
```

### 3. Page Structures

There are two main patterns for implementing dynamic pages:

#### Pattern A: `[...pages].astro`

```ts
import { buildLocalizedStaticPaths } from "@i18n/utils";

// Single-file: [...pages].astro
export function getStaticPaths() {
    return buildLocalizedStaticPaths("/pages", ["...pages"]);
}
```

#### Pattern B: `[pages]/[...index].astro`

```ts
import { buildLocalizedStaticPaths } from "@i18n/utils";

// Folder pattern: [pages]/[...index].astro
export function getStaticPaths() {
    return buildLocalizedStaticPaths("/pages", ["pages", "...index"]);
}
```

## ‚öôÔ∏è Key System Components

### 1. `src/i18n/routes.ts` - Path Translations

This file defines mappings between English and localized paths:

```typescript
export const routes: Record<string, Record<string, string>> = {
    sl: {
        about: "o-projektu",
        blog: "spletni-dnevnik",
        "dynamic-routing": "dinamicno-usmerjanje",
        "blog-pagination": "spletni-dnevnik-paginacija",
        pages: "strani",
        "subpage-1": "podstran-1",
        "subpage-2": "podstran-2",
    },
};
```

> **Important**: Keys must match parameters in `getStaticPaths()` functions!

### 2. `src/i18n/ui.ts` - Language Configuration

This file contains key configurations for language support:

-   **`languages`** - defines supported languages and their labels; add new languages here
-   **`defaultLang`** - sets the default application language; flipping this moves the root (`/`) to that language
-   **`showDefaultLang`** - toggles whether the default language appears in URLs (e.g., `/en/` instead of `/`)

These are fully supported across pages, blog, and pagination.

```typescript
export const languages = {
    en: "English",
    sl: "Slovenian",
};

export const defaultLang = "en"; // set to "sl" to make Slovenian the root
export const showDefaultLang = false; // true ‚Üí always prefix: /en/..., /sl/...
```

#### How to flip the default language

1. Open `src/i18n/ui.ts` and set:
   - `defaultLang = "sl"` (or your new default)
   - `showDefaultLang = true | false` depending on whether you want a prefix for the default language
2. The root becomes:
   - `/` when `showDefaultLang = false`
   - `/{defaultLang}/` when `showDefaultLang = true`
3. No other changes are needed: all pages use `useTranslatedPath()` in `getStaticPaths()` so URLs adapt automatically.
4. Sanity check a few URLs (home, about, blog list/post, pagination) and the language switcher.

### 3. `src/i18n/utils.ts` - Utility Functions

#### `getLangFromUrl(url: URL)`

Extracts the current language from the URL:

```typescript
const lang = getLangFromUrl(Astro.url); // "sl" or "en"
```

#### `useTranslations(lang: string)`

Returns a function for translating texts:

```typescript
const t = useTranslations(lang);
const title = t("main:head.title");
const navHome = t("menu.list.home"); // Uses "common" namespace
```

**Supported key formats**:

-   `"namespace:key"` ‚Üí `t("main:title")`
-   Direct keys ‚Üí `t("menu.home")` (defaults to "common" namespace)
-   Parameters ‚Üí `t("footer.made", { what: "Astro" })`

#### `useTranslatedPath(lang: string)`

Returns a function for translating paths:

```typescript
const translatePath = useTranslatedPath(lang);
<a href={translatePath("/about")}>About</a>; // "/o-projektu" for Slovenian
```

#### `switchLanguageUrl(currentUrl: URL, targetLang: string)`

Enables language switching while preserving current page context:

```typescript
const newUrl = await switchLanguageUrl(Astro.url, "sl");
```

## üß© Helper: buildLocalizedStaticPaths()

Generates localized `getStaticPaths()` entries from an English base path and a simple param pattern. It translates the base path for each language, splits it into segments, and maps those segments into Astro route params.

Signature:

```ts
function buildLocalizedStaticPaths(
  basePath: string,
  pattern: string[],
  extraProps?: (lang: string) => Record<string, any>
): Array<{ params: Record<string, string | undefined>; props: Record<string, any> }>
```

Pattern rules:

- Fixed param names: "about", "dyn_routing", "subpage2"
- Trailing catch‚Äëall: prefix with `...` and put it last (e.g., "...index", "...subpage1", "...blog")
- Missing segments become `undefined` automatically (as Astro expects)
- Respects `defaultLang` and `showDefaultLang`

Examples:

```ts
// About folder: [about]/[...index].astro
export function getStaticPaths() {
  return buildLocalizedStaticPaths("/about", ["about", "...index"]);
}

// Dynamic Routing root: [dyn_routing]/[...index].astro
export function getStaticPaths() {
  return buildLocalizedStaticPaths("/dynamic-routing", ["dyn_routing", "...index"]);
}

// Dynamic Routing subpage 1: [dyn_routing]/[...subpage1].astro
export function getStaticPaths() {
  return buildLocalizedStaticPaths("/dynamic-routing/subpage-1", ["dyn_routing", "...subpage1"]);
}

// Dynamic Routing subpage 2 (nested): [dyn_routing]/[subpage2]/[...index].astro
export function getStaticPaths() {
  return buildLocalizedStaticPaths("/dynamic-routing/subpage-2", ["dyn_routing", "subpage2", "...index"]);
}

// Blog listing: [...blog].astro
export function getStaticPaths() {
  return buildLocalizedStaticPaths("/blog", ["...blog"]);
}

// Optional: extra props per language
export function getStaticPaths() {
  return buildLocalizedStaticPaths("/services", ["services", "...index"], (lang) => ({ section: "services", lang }));
}
```

Note (pagination): the pagination route uses this helper to resolve the localized base (e.g., `blog-pagination` ‚Üí `spletni-dnevnik-paginacija`) and then fans out pages with `paginate()` while preserving the i18n URL shape.

### 4. `src/data/navigationData.ts` - Navigation

```typescript
const navigationData = [
    {
        label: "menu.list.home", // Translation key
        href: "/", // English path (default)
        children: [],
    },
    {
        label: "menu.list.service",
        href: "/services",
        children: [
            {
                label: "menu.list.subpage-1",
                href: "/services/service-1",
            },
        ],
    },
];
```

> **Note**: URLs in navigation are always in English because they're automatically localized via `translatePath()`.

## üó£Ô∏è Translation System

### 1. Translation File Structure

```
src/locales/
‚îú‚îÄ‚îÄ en/
‚îÇ   ‚îú‚îÄ‚îÄ common.json    # Shared translations (navigation, footer)
‚îÇ   ‚îú‚îÄ‚îÄ main.json      # Main page
‚îÇ   ‚îú‚îÄ‚îÄ about.json     # About page
‚îÇ   ‚îî‚îÄ‚îÄ blog.json      # Blog page
‚îî‚îÄ‚îÄ sl/
    ‚îú‚îÄ‚îÄ common.json
    ‚îú‚îÄ‚îÄ main.json
    ‚îú‚îÄ‚îÄ about.json
    ‚îî‚îÄ‚îÄ blog.json
```

### 2. Translation File Example (`common.json`)

```json
{
    "menu": {
        "list": {
            "home": "Home",
            "about": "About",
            "blog": "Blog"
        }
    },
    "footer": {
        "made": "Made with {{what}}"
    }
}
```

> **Note**: For `common.json` files, you don't need to prefix with `common:`. Use `t("menu.list.home")` directly, not `t("common:menu.list.home")`.

### 3. Using Translations in Components

```astro
---
import { useTranslations } from "@i18n/utils";
const t = useTranslations(lang);
---

<h1>{t("main:hero.title")}</h1>
<p>{t("menu.list.home")}</p>
<footer>{t("footer.made", { what: "Astro" })}</footer>
```

## üìù Blog System with linkedContent

### 1. Linking Content Between Languages

The blog system enables linking posts between different languages. The key question is: how does the system know the user is still on the same post when switching languages?

**üîó Solution**: Each blog post must have a `linkedContent` identifier in the frontmatter. This identifier connects posts in different languages that cover the same topic. When users switch languages, the system uses this identifier to find the corresponding post in the target language.

Each blog post must have a `linkedContent` identifier in the frontmatter:

**English post** (`en/security-trends.md`):

```yaml
---
title: "Top Security Trends for 2025"
linkedContent: "security-trends-2025"
author: "Nik Klemenc"
---
```

**Slovenian post** (`sl/varnostni-trendi-2025.md`):

```yaml
---
title: "Glavni varnostni trendi za leto 2025"
linkedContent: "security-trends-2025" # Same identifier!
author: "Nik Klemenc"
---
```

### 2. Authors with Multilingual Data

The system enables linking authors with blog posts. In this case, a JSON format is used where each author has multilingual data. Under the "position" key, positions are defined in English and Slovenian, which are then dynamically displayed based on the selected language.

```json
{
    "nik-klemenc": {
        "name": "Nik Klemenc",
        "image": "./nik.jpg",
        "position": {
            "en": "Full-stack Developer",
            "sl": "Full-stack razvijalec"
        }
    }
}
```

## üìÑ Pagination

The project includes an example of pagination in `[pagination]/[...page].astro`, implemented using Astro‚Äôs default `paginate()` and adapted for localized URLs.

```ts
// Pagination with Astro's paginate()
export const getStaticPaths = async ({ paginate }) => {
    const posts = /* fetch posts and sort per language */ [];
    return paginate(posts, {
        pageSize: 4,
        params: { pagination: "blog-pagination" },
        props: {
            /* lang, authors, totals */
        },
    });
};
```

-   URLs: EN `/blog-pagination`, `/blog-pagination/2`; SL `/sl/spletni-dnevnik-paginacija`, `/sl/spletni-dnevnik-paginacija/2`.
-   The template uses `page.data`, `page.currentPage`, and `page.lastPage`.

## üíª Usage Examples

### 1. Basic Page with Dynamic Routing

```astro
---
import { useTranslations, buildLocalizedStaticPaths } from "@i18n/utils";

export function getStaticPaths() {
    return buildLocalizedStaticPaths("/services", ["services", "...index"]);
}

const { lang } = Astro.props;
const t = useTranslations(lang);
---

<Base title={t("services:head.title")}>
    <h1>{t("services:title")}</h1>
</Base>
```

### 2. Language Switching

```astro
---
// LanguagePicker.astro - actual implementation
import { switchLanguageUrl, getLangFromUrl, useTranslations } from "@i18n/utils";
import { languages } from "@i18n/ui";

// Get current language
const currentLang = getLangFromUrl(Astro.url);
const t = useTranslations(currentLang);

// Prepare URLs for all languages
const languageUrls = await Promise.all(
    Object.entries(languages).map(async ([lang, label]) => {
        const targetUrl = await switchLanguageUrl(Astro.url, lang);
        const translatedLabel = t(`menu.languages.${lang}`);
        return { lang, label: translatedLabel, targetUrl };
    })
);
---

<!-- Dropdown selector -->
<select
    name="language"
    onchange="window.location.href = this.value"
    aria-label={t("menu.languagesText.selectLanguage")}
>
    {languageUrls.map(({ lang, label, targetUrl }) => (
        <option
            value={targetUrl}
            selected={lang === currentLang}
        >
            {label}
        </option>
    ))}
</select>
```

### 3. Localized Links

```astro
---
import { useTranslatedPath } from "@i18n/utils";

const translatePath = useTranslatedPath(lang);
---

<a href={translatePath("/about")}>
    {t("menu.list.about")}
</a>
```

## ‚ú® Best Practices

### 1. File Naming

-   Use English names for files in the `pages/` directory
-   Localize only URLs via `routes.ts`
-   Examples: `[about]` folder, not `[o-projektu]`

### 2. Translation Keys

-   Use hierarchical structure (`menu.list.home`)
-   Separate by namespaces (`main:title`, `about:description`)
-   Add context to key names

### 3. Content Linking

-   Always add `linkedContent` identifier to blog posts
-   Use consistent naming between languages
-   Test language switching on all pages

### 4. SEO Optimization

-   Add `title` and `description` meta data
-   Use `hreflang` attributes for multilingual pages
-   Implement structured data

## ‚ùì Frequently Asked Questions

**Why not use Astro's built-in i18n?**

Astro doesn't provide fully localized, per-segment URLs with content-linked slugs and the precise prefix behavior used here (defaultLang/showDefaultLang + route translations). This project implements a small i18n layer (`routes.ts`, `useTranslatedPath`, `switchLanguageUrl`) that guarantees:
- Translated route segments (e.g., `/about` ‚Üí `/o-projektu`)
- Optional prefix for the default language
- Language switching that preserves context, including blog slugs via `linkedContent`

**How do I add a new language?**

1. Add the language to `src/i18n/ui.ts` (`languages`).
2. Create translation files in `src/locales/[lang]/...`.
3. Add route mappings in `src/i18n/routes.ts` for any segments you localize.

No changes to page files are required ‚Äî all `getStaticPaths()` use `useTranslatedPath()` and automatically pick up the new language.

**How does language switching work for blog posts?**

Each post has a `linkedContent` identifier. `switchLanguageUrl()` uses this to find the matching post in the target language, translate the base route (`blog` ‚Üî `spletni-dnevnik`), and apply the correct prefix depending on `showDefaultLang`.

**Can I use relative paths?**

Use absolute paths with a leading slash (`/about`, not `about`). Path translation relies on consistent absolute segments.

üéØ This approach enables fully localized URLs with static generation performance and predictable SEO-friendly paths.
