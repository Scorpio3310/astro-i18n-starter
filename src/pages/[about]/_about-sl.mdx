---
# SEO metadata
title: "O projektu"
description: "Spoznaj veÄjeziÄni Astro starter projekt z dinamiÄnim usmerjanjem, i18n lokalizacijo, slovensko in angleÅ¡ko podporo. Popoln za moderne spletne strani."
keywords: "Astro projekt, veÄjeziÄna spletna stran, i18n, starter template, dinamiÄno usmerjanje, slovenÅ¡Äina, angleÅ¡Äina, lokalizacija, MDX"
---

# Dokumentacija dinamiÄnega usmerjanja z i18n

Ker Astro privzeto Å¡e ne podpira lokalizacije URL-jev, je bil potreben drugaÄen pristop za omogoÄitev veÄjeziÄnih strani. Ta projekt uporablja dinamiÄne parametre (`[...pages]`) za implementacijo lokaliziranih poti.

## ğŸ—ï¸ Pregled projektne arhitekture

Projekt implementira sistem internacionalizacije (i18n), ki omogoÄa:

-   âœ… SEO-prijazne URL-je v veÄ jezikih
-   âœ… Avtomatsko statiÄno generiranje ob Äasu gradnje
-   âœ… Jezikovno specifiÄno nalaganje vsebine
-   âœ… Dosledno integracijo s sistemom prevodov
-   âœ… Pametno preklapljanje jezikov z ohranjanjem konteksta

## ğŸ“ Struktura datotek

```
src/
â”œâ”€â”€ components/           # Komponente (Header, Footer, LanguagePicker)
â”œâ”€â”€ content/              # Vsebina (blogi, avtorji)
â”‚   â”œâ”€â”€ blog/
â”‚   â”‚   â”œâ”€â”€ en/           # AngleÅ¡ke objave
â”‚   â”‚   â””â”€â”€ sl/           # Slovenske objave
â”‚   â””â”€â”€ authors/          # Podatki o avtorjih
â”œâ”€â”€ data/                 # Navigacijski podatki
â”‚   â””â”€â”€ navigationData.ts
â”œâ”€â”€ i18n/                 # Sistem internacionalizacije
â”‚   â”œâ”€â”€ routes.ts         # Prevodi poti
â”‚   â”œâ”€â”€ ui.ts             # Konfiguracija jezikov
â”‚   â””â”€â”€ utils.ts          # PomoÅ¾ne funkcije
â”œâ”€â”€ layouts/              # Osnovni izgled
â”œâ”€â”€ locales/              # Prevodne datoteke
â”‚   â”œâ”€â”€ en/               # AngleÅ¡ki prevodi
â”‚   â””â”€â”€ sl/               # Slovenski prevodi
â”œâ”€â”€ pages/                # Strani z dinamiÄnim usmerjanjem
â”‚   â”œâ”€â”€ [about]/          # O nas strani
â”‚   â”‚   â”œâ”€â”€ [...index].astro
â”‚   â”‚   â”œâ”€â”€ _about-en.mdx
â”‚   â”‚   â””â”€â”€ _about-sl.mdx
â”‚   â”œâ”€â”€ [blog]/           # Podrobne blog strani
â”‚   â”‚   â””â”€â”€ [...slug].astro
â”‚   â”œâ”€â”€ [dyn_routing]/    # Primeri dinamiÄnega usmerjanja
â”‚   â”‚   â”œâ”€â”€ [subpage2]/
â”‚   â”‚   â”‚   â””â”€â”€ [...index].astro
â”‚   â”‚   â””â”€â”€ [...subpage1].astro
â”‚   â”œâ”€â”€ [pages]/          # SploÅ¡ne strani
â”‚   â”‚   â”œâ”€â”€ [...index].astro
â”‚   â”‚   â”œâ”€â”€ _pages-en.mdx
â”‚   â”‚   â””â”€â”€ _pages-sl.mdx
â”‚   â”œâ”€â”€ [pagination]/     # Primeri paginacije
â”‚   â”‚   â””â”€â”€ [...page].astro
â”‚   â”œâ”€â”€ [...blog].astro   # Seznam blog objav
â”‚   â”œâ”€â”€ [...contact].astro # Kontakt stran
â”‚   â”œâ”€â”€ [...index].astro  # DomaÄa stran
â”‚   â””â”€â”€ 404.astro         # Napaka stran
â””â”€â”€ styles/              # Stilske datoteke
```

## ğŸ”€ Kako deluje dinamiÄno usmerjanje

### 1. Struktura URL-jev

> Primeri predpostavljajo `defaultLang = "en"` in `showDefaultLang = false`. URL-ji se samodejno prilagodijo, ko te nastavitve spremeniÅ¡.

| Vzorec strani              | AngleÅ¡ki URL | Slovenski URL                | Opis         |
| -------------------------- | ------------ | ---------------------------- | ------------ |
| `[...index].astro`         | `/`          | `/sl/`                       | DomaÄa stran |
| `[about]/[...index].astro` | `/about`     | `/sl/o-projektu`             | O nas        |
| `[...contact].astro`       | `/contact`   | `/sl/kontakt`                | Kontakt      |
| `[blog]/[...slug].astro`   | `/blog/post` | `/sl/spletni-dnevnik/objava` | Blog objave  |

### 2. Vizualen prikaz usmerjanja

```
Datoteka: [about]/[...index].astro
â”‚
â”œâ”€â”€ AngleÅ¡ka pot
â”‚   â”œâ”€â”€ URL: /about
â”‚   â”œâ”€â”€ Parametri: { about: "about", index: undefined }
â”‚   â”œâ”€â”€ Props: { lang: "en" }
â”‚   â””â”€â”€ Vsebina: _about-en.md
â”‚
â””â”€â”€ Slovenska pot
    â”œâ”€â”€ URL: /sl/o-projektu
    â”œâ”€â”€ Parametri: { about: "sl", index: "o-projektu" }
    â”œâ”€â”€ Props: { lang: "sl" }
    â””â”€â”€ Vsebina: _about-sl.md
```

### 3. Strukture strani

Obstajata dva glavna vzorca za implementacijo dinamiÄnih strani:

#### Vzorec A: `[...pages].astro`

```ts
import { buildLocalizedStaticPaths } from "@i18n/utils";

// Enotna datoteka: [...pages].astro
export function getStaticPaths() {
    return buildLocalizedStaticPaths("/pages", ["...pages"]);
}
```

#### Vzorec B: `[pages]/[...index].astro`

```ts
import { buildLocalizedStaticPaths } from "@i18n/utils";

// Vzorec mape: [pages]/[...index].astro
export function getStaticPaths() {
    return buildLocalizedStaticPaths("/pages", ["pages", "...index"]);
}
```

## âš™ï¸ KljuÄne komponente sistema

### 1. `src/i18n/routes.ts` - Prevodi poti

Ta datoteka definira preslikave med angleÅ¡kimi in lokaliziranimi potmi:

```typescript
export const routes: Record<string, Record<string, string>> = {
    sl: {
        about: "o-projektu",
        blog: "spletni-dnevnik",
        services: "storitve",
        pages: "strani",
        contact: "stik",
    },
};
```

> **Pomembno**: KljuÄi se morajo ujemati s parametri v `getStaticPaths()` funkcijah!

### 2. `src/i18n/ui.ts` - Konfiguracija jezikov

Ta datoteka vsebuje kljuÄne konfiguracije za jezikovno podporo:

-   **`languages`** - definira podprte jezike in njihove oznake; tukaj dodaÅ¡ nove jezike
-   **`defaultLang`** - doloÄa privzeti jezik aplikacije; sprememba premakne koren (`/`) na izbrani jezik
-   **`showDefaultLang`** - doloÄa, ali se privzeti jezik prikaÅ¾e v URL-jih (`/en/...` namesto `/`)

Obe nastavitvi sta podprti na straneh, blogu in paginaciji.

```typescript
export const languages = {
    en: "English",
    sl: "Slovenian",
};

export const defaultLang = "en"; // npr. "sl" za slovenski koren
export const showDefaultLang = false; // true â†’ vedno s predpono: /en/..., /sl/...
```

#### Kako preklopiti privzeti jezik

1. Odpri `src/i18n/ui.ts` in nastavi:
   - `defaultLang = "sl"` (ali drug jezik)
   - `showDefaultLang = true | false` glede na to, ali Å¾eliÅ¡ predpono tudi za privzeti jezik
2. Koren postane:
   - `/`, ko je `showDefaultLang = false`
   - `/{defaultLang}/`, ko je `showDefaultLang = true`
3. Ostalih sprememb ni treba: strani uporabljajo `useTranslatedPath()` v `getStaticPaths()` in se poti prilagodijo samodejno.
4. Preveri home, about, blog (seznam/objava) in paginacijo ter preklop jezika.

### 3. `src/i18n/utils.ts` - PomoÅ¾ne funkcije

#### `getLangFromUrl(url: URL)`

Pridobiva trenutni jezik iz URL-ja:

```typescript
const lang = getLangFromUrl(Astro.url); // "sl" ali "en"
```

#### `useTranslations(lang: string)`

VraÄa funkcijo za prevajanje besedil:

```typescript
const t = useTranslations(lang);
const title = t("main:head.title");
const navHome = t("menu.list.home"); // Uporablja "common" imenski prostor
```

**Podprt format kljuÄev**:

-   `"namespace:key"` â†’ `t("main:title")`
-   Neposredni kljuÄi â†’ `t("menu.home")` (privzeto "common" imenski prostor)
-   Parametri â†’ `t("footer.made", { what: "Astro" })`

#### `useTranslatedPath(lang: string)`

VraÄa funkcijo za prevajanje poti:

```typescript
const translatePath = useTranslatedPath(lang);
<a href={translatePath("/about")}>About</a>; // "/o-projektu" za slovenÅ¡Äino
```

#### `switchLanguageUrl(currentUrl: URL, targetLang: string)`

OmogoÄa preklapljanje jezikov ob ohranjanju konteksta trenutne strani:

```typescript
const newUrl = await switchLanguageUrl(Astro.url, "sl");
```

## ğŸ§© Helper: buildLocalizedStaticPaths()

Ustvari lokalizirane vnose za `getStaticPaths()` iz angleÅ¡ke osnovne poti in enostavnega vzorca parametrov. Za vsak jezik prevede osnovno pot, jo razdeli na segmente in jih preslika v Astro parametre.

Podpis:

```ts
function buildLocalizedStaticPaths(
  basePath: string,
  pattern: string[],
  extraProps?: (lang: string) => Record<string, any>
): Array<{ params: Record<string, string | undefined>; props: Record<string, any> }>
```

Pravila vzorca:

- Fiksna imena: "about", "dyn_routing", "subpage2"
- ZakljuÄno â€œcatchâ€‘allâ€: predpona `...` in vedno zadnji (npr. "...index", "...subpage1", "...blog")
- ManjkajoÄi segmenti postanejo `undefined` (kar Astro priÄakuje)
- UpoÅ¡teva `defaultLang` in `showDefaultLang`

Primeri:

```ts
// O nas mapa: [about]/[...index].astro
export function getStaticPaths() {
  return buildLocalizedStaticPaths("/about", ["about", "...index"]);
}

// DinamiÄno usmerjanje root: [dyn_routing]/[...index].astro
export function getStaticPaths() {
  return buildLocalizedStaticPaths("/dynamic-routing", ["dyn_routing", "...index"]);
}

// DinamiÄno usmerjanje podstran 1: [dyn_routing]/[...subpage1].astro
export function getStaticPaths() {
  return buildLocalizedStaticPaths("/dynamic-routing/subpage-1", ["dyn_routing", "...subpage1"]);
}

// DinamiÄno usmerjanje podstran 2 (gnezdeno): [dyn_routing]/[subpage2]/[...index].astro
export function getStaticPaths() {
  return buildLocalizedStaticPaths("/dynamic-routing/subpage-2", ["dyn_routing", "subpage2", "...index"]);
}

// Blog seznam: [...blog].astro
export function getStaticPaths() {
  return buildLocalizedStaticPaths("/blog", ["...blog"]);
}

// Opcijsko: dodatni props per jezik
export function getStaticPaths() {
  return buildLocalizedStaticPaths("/services", ["services", "...index"], (lang) => ({ section: "services", lang }));
}
```

Opomba (paginacija): paginacijska pot uporabi ta helper za lokalizacijo osnovnega segmenta (npr. `blog-pagination` â†’ `spletni-dnevnik-paginacija`), nato pa preko `paginate()` razÅ¡iri strani in ohrani i18n obliko URLâ€‘jev.

### 4. `src/data/navigationData.ts` - Navigacija

```typescript
const navigationData = [
    {
        label: "menu.list.home", // KljuÄ za prevod
        href: "/", // AngleÅ¡ka pot (privzeta)
        children: [],
    },
    {
        label: "menu.list.service",
        href: "/services",
        children: [
            {
                label: "menu.list.subpage-1",
                href: "/services/service-1",
            },
        ],
    },
];
```

> **Opomba**: URL-ji v navigaciji so vedno v angleÅ¡Äini, ker se avtomatsko lokalizirajo preko `translatePath()`.

## ğŸ—£ï¸ Sistem prevodov

### 1. Struktura prevodnih datotek

```
src/locales/
â”œâ”€â”€ en/
â”‚   â”œâ”€â”€ common.json    # Skupni prevodi (navigacija, footer)
â”‚   â”œâ”€â”€ main.json      # Glavna stran
â”‚   â”œâ”€â”€ about.json     # O nas stran
â”‚   â””â”€â”€ blog.json      # Blog stran
â””â”€â”€ sl/
    â”œâ”€â”€ common.json
    â”œâ”€â”€ main.json
    â”œâ”€â”€ about.json
    â””â”€â”€ blog.json
```

### 2. Primer prevodne datoteke (`common.json`)

```json
{
    "menu": {
        "list": {
            "home": "Domov",
            "about": "O nas",
            "blog": "Blog"
        }
    },
    "footer": {
        "made": "Narejeno z {{what}}"
    }
}
```

> **Opomba**: Za datoteke `common.json` ne rabiÅ¡ predpone `common:`. Uporabi direktno `t("menu.list.home")`, ne `t("common:menu.list.home")`.

### 3. Uporaba prevodov v komponentah

```astro
---
import { useTranslations } from "@i18n/utils";
const t = useTranslations(lang);
---

<h1>{t("main:hero.title")}</h1>
<p>{t("menu.list.home")}</p>
<footer>{t("footer.made", { what: "Astro" })}</footer>
```

## ğŸ“ Blog sistem z linkedContent

### 1. Povezovanje vsebin med jeziki

Blog sistem omogoÄa povezovanje objav med razliÄnimi jeziki. KljuÄno vpraÅ¡anje je: kako sistem ve, da je uporabnik Å¡e vedno na isti objavi, ko preklopi jezik?

**ğŸ”— ReÅ¡itev**: Vsaka blog objava mora imeti `linkedContent` identifikator v frontmatter-ju. Ta identifikator povezuje objave v razliÄnih jezikih, ki obravnavajo isto temo. Ko uporabnik preklopi jezik, sistem uporabi ta identifikator za iskanje ustrezne objave v ciljnem jeziku.

**AngleÅ¡ka objava** (`en/security-trends.md`):

```yaml
---
title: "Top Security Trends for 2025"
linkedContent: "security-trends-2025"
author: "Nik Klemenc"
---
```

**Slovenska objava** (`sl/varnostni-trendi-2025.md`):

```yaml
---
title: "Glavni varnostni trendi za leto 2025"
linkedContent: "security-trends-2025" # Isti identifikator!
author: "Nik Klemenc"
---
```

### 2. Avtorji z veÄjeziÄnimi podatki

Sistem omogoÄa povezovanje avtorjev z blog objavami. V tem primeru je uporabljen JSON format, kjer ima vsak avtor veÄjeziÄne podatke. Pod kljuÄem "position" so definirane pozicije v angleÅ¡Äini in slovenÅ¡Äini, ki se nato dinamiÄno prikazujejo glede na izbrani jezik.

```json
{
    "nik-klemenc": {
        "name": "Nik Klemenc",
        "image": "./nik.jpg",
        "position": {
            "en": "Full-stack Developer",
            "sl": "Full-stack razvijalec"
        }
    }
}
```

## ğŸ“„ Paginacija

Projekt vkljuÄuje primer paginacije v `[pagination]/[...page].astro`, implementiran z Astro-jevo privzeto funkcijo `paginate()` in prilagojen za lokalizirane URL-je.

```ts
// Paginacija z Astro funkcijo paginate()
export const getStaticPaths = async ({ paginate }) => {
    const posts = /* pridobi in uredi objave po jeziku */ [];
    return paginate(posts, {
        pageSize: 4,
        params: { pagination: "blog-pagination" },
        props: {
            /* lang, authors, totals */
        },
    });
};
```

-   URL-ji: EN `/blog-pagination`, `/blog-pagination/2`; SL `/sl/spletni-dnevnik-paginacija`, `/sl/spletni-dnevnik-paginacija/2`.
-   Predloga uporablja `page.data`, `page.currentPage` in `page.lastPage`.

## ğŸ’» Primeri uporabe

### 1. Osnovna stran z dinamiÄnim usmerjanjem

```astro
---
import { useTranslations, buildLocalizedStaticPaths } from "@i18n/utils";

export function getStaticPaths() {
    return buildLocalizedStaticPaths("/services", ["services", "...index"]);
}

const { lang } = Astro.props;
const t = useTranslations(lang);
---

<Base title={t("services:head.title")}>
    <h1>{t("services:title")}</h1>
</Base>
```

### 2. Preklapljanje jezikov

```astro
---
// LanguagePicker.astro - dejanska implementacija
import { switchLanguageUrl, getLangFromUrl, useTranslations } from "@i18n/utils";
import { languages } from "@i18n/ui";

// Pridobi trenutni jezik
const currentLang = getLangFromUrl(Astro.url);
const t = useTranslations(currentLang);

// Pripravi URL-je za vse jezike
const languageUrls = await Promise.all(
    Object.entries(languages).map(async ([lang, label]) => {
        const targetUrl = await switchLanguageUrl(Astro.url, lang);
        const translatedLabel = t(`menu.languages.${lang}`);
        return { lang, label: translatedLabel, targetUrl };
    })
);
---

<!-- Dropdown selektor -->
<select
    name="language"
    onchange="window.location.href = this.value"
    aria-label={t("menu.languagesText.selectLanguage")}
>
    {languageUrls.map(({ lang, label, targetUrl }) => (
        <option
            value={targetUrl}
            selected={lang === currentLang}
        >
            {label}
        </option>
    ))}
</select>
```

### 3. Lokalizirane povezave

```astro
---
import { getLangFromUrl, useTranslatedPath } from "@i18n/utils";

const lang = getLangFromUrl(Astro.url);
const translatePath = useTranslatedPath(lang);
---

<a href={translatePath("/about")}>
    {t("menu.list.about")}
</a>
```

## âœ¨ NajboljÅ¡e prakse

### 1. Poimenovanje datotek

-   Uporabljajte angleÅ¡ka imena za datoteke v `pages/` mapi
-   Lokalizirajte samo URL-je preko `routes.ts`
-   Primeri: `[about]` mapa, ne `[o-projektu]`

### 2. Prevodni kljuÄi

-   Uporabljajte hierarhiÄno strukturo (`menu.list.home`)
-   LoÄite po imenskih prostorih (`main:title`, `about:description`)
-   Dodajte kontekst v imena kljuÄev

### 3. Povezovanje vsebin

-   Vedno dodajte `linkedContent` identifikator v blog objave
-   Uporabljajte dosledno poimenovanje med jeziki
-   Testirajte preklapljanje jezikov na vseh straneh

### 4. SEO optimizacija

-   Dodajte `title` in `description` meta podatke
-   Uporabljajte `hreflang` atribute za veÄjeziÄne strani
-   Implementirajte strukturirane podatke

## â“ Pogosta vpraÅ¡anja

**Zakaj ne uporabite privzetega Astro i18n?**

Astro nima vseh funkcionalnosti za popolnoma lokalizirane segmente URL-jev s povezovanjem vsebine (linked slugi) in natanÄnim vedenjem predpone (defaultLang/showDefaultLang). Ta projekt uporablja tanek i18n sloj (`routes.ts`, `useTranslatedPath`, `switchLanguageUrl`), ki zagotavlja:
- Prevedene segmente poti (npr. `/about` â†’ `/o-projektu`)
- Neobvezno predpono za privzeti jezik
- Preklop jezika z ohranjanjem konteksta, vkljuÄno z blog slugi prek `linkedContent`

**Kako dodam nov jezik?**

1. Dodaj jezik v `src/i18n/ui.ts` (`languages`).
2. Dodaj prevodne datoteke v `src/locales/[lang]/...`.
3. Dodaj preslikave poti v `src/i18n/routes.ts` za segmente, ki jih lokaliziraÅ¡.

Ni treba spreminjati datotek strani â€” vse `getStaticPaths()` uporabljajo `useTranslatedPath()` in samodejno prevzamejo nov jezik.

**Kako deluje preklop jezika za blog objave?**

Vsaka objava ima `linkedContent` identifikator. `switchLanguageUrl()` z njim poiÅ¡Äe ustrezno objavo v ciljnem jeziku, prevede osnovno pot (`blog` â†” `spletni-dnevnik`) in uporabi pravilno predpono glede na `showDefaultLang`.

**Ali lahko uporabljam relativne poti?**

Uporabi absolutne poti z zaÄetno poÅ¡evnico (`/about`, ne `about`). Prevajanje poti se opira na dosledne absolutne segmente.

ğŸ¯ Ta pristop omogoÄa popolnoma lokalizirane URL-je, ohranja zmogljivosti statiÄnega generiranja in zagotavlja SEO prijazne poti.
